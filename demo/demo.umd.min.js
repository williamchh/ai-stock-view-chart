!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).Demo={})}(this,function(n){"use strict";function t(n){return{period:n,count:0,initialSum:0,ema:null,lastValue:null}}function e(n,t,e=!1){const l={...t};if(e&&null!==l.ema&&null!==l.lastValue){const t=2/(l.period+1),e=(l.ema-l.lastValue*t)/(1-t);l.ema=n*t+e*(1-t),l.lastValue=n}else if(!e){if(l.count<l.period)l.initialSum+=n,l.count++,l.count===l.period&&(l.ema=l.initialSum/l.period);else{const t=2/(l.period+1);l.ema=n*t+l.ema*(1-t)}l.lastValue=n}return{value:l.ema,state:l}}function l(n,t,l=!1){const o=e(n,t.fast,l),u=e(n,t.slow,l),i=null!==o.value&&null!==u.value?o.value-u.value:null;let s={value:null,state:t.signal};null!==i&&(s=e(i,t.signal,l));const f=null!==i&&null!==s.value?i-s.value:null;return{macdLine:i,signalLine:s.value,histogram:f,state:{fast:o.state,slow:u.state,signal:s.state}}}function o(n,t,e=!1){let l=[...t.window],o=t.sum;if(e&&l.length>0){const t=l[l.length-1];l[l.length-1]=n,o=o-t+n}else l.push(n),o+=n,l.length>t.period&&(o-=l.shift());return{value:l.length===t.period?o/t.period:null,state:{period:t.period,window:l,sum:o}}}n.calculateMACD=function(n,e=12,o=26,u=9){let i=function(n=12,e=26,l=9){return{fast:t(n),slow:t(e),signal:t(l)}}(e,o,u);const s=[];for(const t of n){const n=l(t.close,i);s.push({time:t.time,value:n.macdLine,signal:n.signalLine,histogram:n.histogram}),i=n.state}return s},n.calculateSMA=function(n,t,e=n=>n.close){let l=function(n){return{period:n,window:[],sum:0}}(t);const u=[];for(const t of n){const n=o(e(t),l);u.push({time:t.time,value:n.value}),l=n.state}return u},n.generateCandlestickData=function(n){const t=[];let e=200,l=new Date("2015-01-01");for(let o=0;o<n;o++){const n=e+5*(Math.random()-.5),o=n+10*(Math.random()-.5),u=Math.max(n,o)+5*Math.random(),i=Math.min(n,o)-5*Math.random(),s=1e4*Math.random()+1e3;t.push({time:l.getTime()/1e3,open:n,high:u,low:i,close:o,volume:s}),e=o,l.setDate(l.getDate()+1)}return t}});//# sourceMappingURL=demo.umd.min.js.map

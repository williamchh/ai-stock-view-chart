!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).Demo={})}(this,function(t){"use strict";function n(t){return{period:t,count:0,initialSum:0,ema:null,lastValue:null}}function e(t,n,e=!1){const l={...n};if(e&&null!==l.ema&&null!==l.lastValue){const n=2/(l.period+1),e=(l.ema-l.lastValue*n)/(1-n);l.ema=t*n+e*(1-n),l.lastValue=t}else if(!e){if(l.count<l.period)l.initialSum+=t,l.count++,l.count===l.period&&(l.ema=l.initialSum/l.period);else{const n=2/(l.period+1);l.ema=t*n+l.ema*(1-n)}l.lastValue=t}return{value:l.ema,state:l}}function l(t,n,l=!1){const o=e(t,n.fast,l),u=e(t,n.slow,l),s=null!==o.value&&null!==u.value?o.value-u.value:null;let i={value:null,state:n.signal};null!==s&&(i=e(s,n.signal,l));const a=null!==s&&null!==i.value?s-i.value:null;return{macdLine:s,signalLine:i.value,histogram:a,state:{fast:o.state,slow:u.state,signal:i.state}}}function o(t,n,e=!1){let l=[...n.window],o=n.sum;if(e&&l.length>0){const n=l[l.length-1];l[l.length-1]=t,o=o-n+t}else l.push(t),o+=t,l.length>n.period&&(o-=l.shift());return{value:l.length===n.period?o/n.period:null,state:{period:n.period,window:l,sum:o}}}function u(t,n,e=!1){const l={...n};if(null===l.lastPrice)return l.lastPrice=t,{value:null,state:l};const o=t-l.lastPrice,u=Math.max(0,o),s=Math.max(0,-o);return e?l.gains.length>0&&(l.gains[l.gains.length-1]=u,l.losses[l.losses.length-1]=s):(l.gains.push(u),l.losses.push(s),l.gains.length>l.period&&(l.gains.shift(),l.losses.shift())),l.lastPrice=t,l.gains.length===l.period?(0===l.avgGain?(l.avgGain=l.gains.reduce((t,n)=>t+n,0)/l.period,l.avgLoss=l.losses.reduce((t,n)=>t+n,0)/l.period):(l.avgGain=(l.avgGain*(l.period-1)+u)/l.period,l.avgLoss=(l.avgLoss*(l.period-1)+s)/l.period),0===l.avgLoss?{value:100,state:l}:{value:100-100/(1+l.avgGain/l.avgLoss),state:l}):{value:null,state:l}}t.calculateMACD=function(t,e=12,o=26,u=9){let s=function(t=12,e=26,l=9){return{fast:n(t),slow:n(e),signal:n(l)}}(e,o,u);const i=[];for(const n of t){const t=l(n.close,s);i.push({time:n.time,macd:t.macdLine,signal:t.signalLine,histogram:t.histogram}),s=t.state}return i},t.calculateRSI=function(t,n=14){let e=function(t=14){return{period:t,gains:[],losses:[],avgGain:0,avgLoss:0,lastPrice:null}}(n);const l=[];for(const n of t){const t=u(n.close,e);l.push({time:n.time,value:t.value}),e=t.state}return l},t.calculateSMA=function(t,n,e=t=>t.close){let l=function(t){return{period:t,window:[],sum:0}}(n);const u=[];for(const n of t){const t=o(e(n),l);u.push({time:n.time,value:t.value}),l=t.state}return u},t.generateCandlestickData=function(t){const n=[];let e=200,l=new Date("2015-01-01");for(let o=0;o<t;o++){const t=e+5*(Math.random()-.5),o=t+10*(Math.random()-.5),u=Math.max(t,o)+5*Math.random(),s=Math.min(t,o)-5*Math.random(),i=1e4*Math.random()+1e3;n.push({time:l.getTime()/1e3,open:t,high:u,low:s,close:o,volume:i}),e=o,l.setDate(l.getDate()+1)}return n}});//# sourceMappingURL=demo.umd.min.js.map
